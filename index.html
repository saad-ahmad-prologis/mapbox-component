<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Custom Mapbox UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Mapbox -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.17.0/mapbox-gl.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.17.0/mapbox-gl.js"></script>

    <style>
        :root {
            --btn-default: #003840;
            --btn-active: #004a55;
        }

        body {
            background: #062a2f;
            font-family: Arial, sans-serif;
        }

        .map-card {
            width: 85%;
            height: 500px;
            margin: 40px auto;
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            background: #fff;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        /* Top right controls */
        .top-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .map-type-btn-gap {
            display: flex;
        }

        .map-zoom-btn-gap {
            display: flex;
            gap: 8px;
        }

        .btn {
            /* background: #0b3a40; */
            background-color: var(--btn-default);
            color: white;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
        }

        .btn.active {
            background-color: var(--btn-active);
        }

        .btn:hover {
            opacity: 0.9;
        }

        /* Bottom filter bar */
        .bottom-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .pill {
            background: #083238;
            color: white;
            padding: 10px 18px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            border: none;
            outline: none;
            box-shadow: none;
        }

        .pill-icon {
            width: 16px;
            height: 16px;
            display: block;
            flex-shrink: 0;
        }
    </style>
</head>

<body>
    <div class="map-card">
        <div id="map"></div>

        <!-- Top right -->
        <div class="top-controls">
            <div class="map-type-btn-gap">
                <button class="btn active" onclick="setMapStyle('streets', this)">
                    Map
                </button>
                <button class="btn" onclick="setMapStyle('satellite', this)">
                    Hybrid
                </button>
            </div>

            <div class="map-zoom-btn-gap">
                <button class="btn" onclick="map.zoomOut()">‚àí</button>
                <button class="btn" onclick="map.zoomIn()">+</button>
            </div>
        </div>

        <!-- Bottom -->
        <!-- <div class="bottom-controls">
            <div class="pill">üçî Food</div>
            <div class="pill">üöÜ Transit</div>
            <div class="pill">‚öô Utilities</div>
        </div> -->
        <div class="bottom-controls">
            <button class="pill" type="button">
                <img src="./assets/icons/food.svg" alt="" class="pill-icon" />
                <span>Food</span>
            </button>

            <button class="pill" type="button">
                <img src="./assets/icons/transport.svg" alt="" class="pill-icon" />
                <span>Transport</span>
            </button>

            <button class="pill" type="button">
                <img src="./assets/icons/amenities.svg" alt="" class="pill-icon" />
                <span>Amenities</span>
            </button>
        </div>
    </div>

    <script>
        mapboxgl.accessToken =
            "pk.eyJ1IjoicGhvbGxpcy1wcm9sb2dpcyIsImEiOiJjbWl4cGt1ajUwN2JpM2RvOXdqOWFmb3U3In0.RyiaedumDC0gnw6FeFKqrA ";

        const map = new mapboxgl.Map({
            container: "map",
            style: "mapbox://styles/phollis-prologis/cmixr0gqa000d01rj1py34kjg",
            attributionControl: false,
            // center: [-76.6122, 39.2904], // Baltimore
            center: [-76.525583, 39.259040],
            zoom: 12,

        });

        function setMapStyle(style, el) {
            setStyle(style);
            const buttons = el.parentElement.querySelectorAll(".btn");
            buttons.forEach((btn) => btn.classList.remove("active"));
            el.classList.add("active");
        }

        function setStyle(type) {
            map.setStyle(
                type === "satellite"
                    ? "./styles-hybrid/style-hybrid.json"
                    : // : "mapbox://styles/phollis-prologis/cmixr0gqa000d01rj1py34kjg"
                    "./styles-map/style-map.json"
            );
        }
function makeFoodMarkerEl({
  iconPath = "./assets/icons/food.svg",
  size = 44
} = {}) {
  const el = document.createElement("div");
  el.style.width = `${size}px`;
  el.style.height = `${size}px`;
  el.style.cursor = "pointer";
  el.style.display = "flex";
  el.style.alignItems = "center";
  el.style.justifyContent = "center";

  const img = document.createElement("img");
  img.src = iconPath;
  img.style.width = "100%";
  img.style.height = "100%";
  img.style.objectFit = "contain";

  el.appendChild(img);
  return el;
}


        map.on("load", () => {
            // Route line
            map.addSource("route", {
                type: "geojson",
                data: {
                    type: "Feature",
                    geometry: {
                        type: "LineString",
                        coordinates: [
                            [-76.615, 39.295],
                            [-76.61, 39.292],
                            [-76.605, 39.288],
                        ],
                    },
                },
            });

            map.addLayer({
                id: "route-line",
                type: "line",
                source: "route",
                paint: {
                    "line-color": "#00c2b2",
                    "line-width": 4,
                },
            });

            // Markers
            const transport = [
                [-76.526761, 39.264058],
                [-76.532245,39.256641],
                [-76.524626,39.258690],
            ];

                        const food = [
                [-76.531397,39.257645],
                [-76.530850,39.263673],
                [-76.526655,39.262439],
                [-76.512440,39.258160]
            ];

            transport.forEach((coord) => {
                new mapboxgl.Marker({ color: "#DBD94B" }).setLngLat(coord).addTo(map);
            });

            food.forEach((coord) => {
                new mapboxgl.Marker({ color: "#88FF8D" }).setLngLat(coord).addTo(map);
            });
//             food.forEach((coord) => {
//   const el = makeFoodMarkerEl({
//     iconPath: "./assets/icons/food.svg",
//     pin: "#7CFF79",
//     ring: "#FFFFFF",
//     size: 44,
//     iconSize: 18
//   });

//   new mapboxgl.Marker({
//     element: el,
//     anchor: "bottom"
//   })
//     .setLngLat(coord)
//     .addTo(map);
// });

        });
    </script>
</body>

</html>